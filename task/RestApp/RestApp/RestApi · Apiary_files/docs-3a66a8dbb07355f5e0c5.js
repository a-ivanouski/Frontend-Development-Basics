webpackJsonp([14,8],[function(e,t,n){var i=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;n.e(0,function(e){var t=[e(18),e(24),e(11),e(7),e(6),e(16),e(15),e(87),e(116),e(85),e(86),e(80),e(82),e(77),e(109),e(110),e(65),e(66),e(67),e(68),e(69),e(23)];(function(e,t,n,r,o,s,a,l,u,c,h,d,p,f,m,g){var v;return v=function(e){function t(e){var n;null==e&&(e={}),t.__super__.constructor.call(this,e),this.isAnonymousApi=e.isAnonymousApi||!1,n=[this.initUserModel,this.initApiModel,this.initCodeExamplesCollection,this.initHostsCollection,this.initApplicationView,this.initRouter],n=o.map(n,function(e){return function(t){return t.bind(e)}}(this)),s.series(n,this.handleInitEvent.bind(this)),this.handleRequestPreviewEventThrottled=o.throttle(this.handleRequestPreviewEvent,this.DEFAULT_PREVIEW_REQUEST_TIMEOUT)}return i(t,e),t.prototype.NAME="docs",t.prototype.DEFAULT_PREVIEW_REQUEST_TIMEOUT=500,t.prototype.DEFAULT_FEATURES={discussion:!0,console:!0,toc:!0},t.prototype.ALLOWED_ORIGINS=["Apiary.Embed","Apiary.Editor"],t.prototype.handleInitEvent=function(e){return t.__super__.handleInitEvent.call(this,e),this.attachEvents(),this.initTrackingModule(),this.initLayoutTrackingModule(),this.initDocumentationTrackingModule(),this.isPreview?void 0:this.initIntercomModule()},t.prototype.attachEvents=function(){var e,n;return null!=(e=this.view)&&null!=(n=e.$windowElement)&&n.on("message",this.handleMessageEvent.bind(this)),t.__super__.attachEvents.call(this)},t.prototype.handleRequestPreviewEvent=function(e){var t,n,i;return this.log.info("Handling the ‘RequestPreview’ event..."),i=this.model.get("url"),n=this.model.get("humanColumnScrollTopOffset"),this.log.debug("‘previousUrl’ is set to ‘"+i+"’."),this.log.debug("‘previousHumanColumnScrollTopOffset’ is set to ‘"+n+"’."),t=new d({},{applicationModel:this.model}),t.initFromBlueprintCode(e.api.code,function(e){return function(r){var o,s,a;return r?(e.log.error("An error occured, unable to initialize the ‘Api’ modelfrom a blueprint.",r),void("parseError"===r.type&&window.parent.postMessage({eventType:"parseError",origin:"Apiary",error:r},"*"))):(a=t.get("warnings"),o=t.get("errors"),window.parent.postMessage({eventType:"parserWarning",origin:"Apiary",warnings:a,errors:o},"*"),s={applicationModel:e.model,applicationView:e.view,apiModel:t,previousUrl:i,previousHumanColumnScrollTopOffset:n},u.route.apply(e,[null,null,s]))}}(this))},t.prototype.handleAnonymousPreviewEvent=function(e){var t,n;return n=e.data.code,t=this.model.get("apiModel"),t.initFromAnonymousBlueprintCode(n,function(e){return function(n){var i;return i={applicationModel:e.model,applicationView:e.view,apiModel:t},u.route.apply(e,[null,null,i])}}(this))},t.prototype.handleMessageEvent=function(e){var t,n;if(t=null!=(n=e.originalEvent)?n.data:void 0,t&&o.contains(this.ALLOWED_ORIGINS,t.origin))switch(t.eventType){case"init":return this.model.trigger("init:embed",t);case"change:url":return l.projectCurrentUrl(t.data.url,{apiModel:this.apiModel,applicationModel:this.model});case"add:codeExample":return this.model.trigger("add:codeExample",t);case"preview":return this.handleRequestPreviewEventThrottled(t);case"anonymousPreview":return this.handleAnonymousPreviewEvent(t)}},t.prototype.initApplicationView=function(e){var n;return this.log.silly("Initializing the ‘Application’ view..."),this.features["3ColumnDocumentation"]&&(n={setWidth:!0,setHeight:!0,calculateWindowSize:!0,initLoadingElement:!0,detectTouchDevices:!0,setInitialSize:!0,setContentInitialSize:!0,initAnimationFrame:!0,embedded:this.embedded,isPreview:this.isPreview}),t.__super__.initApplicationView.call(this,n,e)},t.prototype.initRouter=function(e){var n;return this.log.silly("Initializing router..."),n=[{path:/.*/,name:"documentation",callback:l.route.bind(this)},{path:"",name:"documentation",callback:l.route.bind(this)},{path:"previews/:apiSubdomain(/*path)",name:"preview",callback:u.route.bind(this)}],t.__super__.initRouter.call(this,n,e)},t.prototype.initApiModel=function(e){var t;return this.log.silly("Initializing the ‘Api’ model..."),this.apiModel?e():(t={applicationModel:this.model,docsApplication:this},this.apiModel=new d({},t),this.model.set("apiModel",this.apiModel),this.isAnonymousApi?(this.apiModel.fill({}),e()):this.apiModel.fetch(e))},t.prototype.initLayoutTrackingModule=function(e){var t;return this.log.silly("Initializing the ‘LayoutTracking’ module..."),t={applicationModel:this.model,applicationView:this.view},this.model.set({layoutTrackingModule:new g(t,{initGoogleAnalytics:!0})}),"function"==typeof e?e():void 0},t.prototype.initDocumentationTrackingModule=function(e){var t;return this.log.silly("Initializing the ‘DocumentationTracking’ module..."),t={applicationModel:this.model,applicationView:this.view,docsApplication:this},this.model.set({documentationTrackingModule:new m(t,{initGoogleAnalytics:!0})}),"function"==typeof e?e():void 0},t.prototype.initCodeExamplesCollection=function(e){return this.model.set({codeExamplesCollection:new c}),"function"==typeof e?e():void 0},t.prototype.initHostsCollection=function(e){var t;return t={apiModel:this.apiModel,applicationModel:this.model},this.model.set("hostsCollection",new h(null,t)),"function"==typeof e?e():void 0},t.prototype.start=function(e){return this.model.get("initialized")?(this.Router&&this.router&&(this.model.get("embedded")||this.model.get("isPreview")?this.startRouter({pushState:!0}):this.startRouter({pushState:!1})),this.model.set("running",!0),"function"==typeof e?e():void 0):this.model.once("change:initialized",this.handleChangeInitializedEvent.bind(this,e))},t}(n),new v(window.Apiary.APPLICATION_DATA).start(function(){})}).apply(null,t)})}]);